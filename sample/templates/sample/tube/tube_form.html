{% extends "base_generic.html" %}

{% block content %}
  {% load widget_tweaks %}

  <form method="post" id="tubeForm" novalidate>
    {% csrf_token %}

    {% for hidden_field in form.hidden_fields %}
      {{ hidden_field }}
    {% endfor %}

    {% if form.non_field_errors %}
      <div class="alert alert-danger" role="alert">
        {% for error in form.non_field_errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% endif %}

    <table class="table table-hover">
    <tbody>
    {% for field in form.visible_fields %}
        <tr class="table-secondary">
        <th>{{ field.label_tag }}</th>
        <td>
        {% if form.is_bound %}
          {% if field.errors %}
              {% render_field field class="form-control is-invalid" %}
              {% for error in field.errors %}
                <div class="invalid-feedback">
                  {{ error }}
                </div>
              {% endfor %}
          {% else %}
              {% render_field field class="form-control is-valid" %}
          {% endif %}
        {% else %}
            {% render_field field class="form-control" %}
        {% endif %}

        {% if field.help_text %}
          <small class="form-text text-muted">{{ field.help_text }}</small>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
  </table>

    <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> save</button>
    {% if tube.rack.id %}
      <a href={% url 'tube-r-detail' tube.box.freezer.id tube.box.compartment.id tube.box.rack.id tube.box.rackmodule.id tube.box.id tube.id %} class="btn btn-secondary"><i class="fas fa-times-circle"></i> cancel</a>
    {% elif tube.id %}
      <a href={% url 'tube-c-detail' tube.box.freezer.id tube.box.compartment.id tube.box.id tube.id %} class="btn btn-secondary"><i class="fas fa-times-circle"></i> cancel</a>
    {% else %}
      <a href={% url 'freezer' %} class="btn btn-secondary"><i class="fas fa-times-circle"></i> cancel</a>
    {% endif %}
  </form>

<script>
  $('#id_box').parent().parent().hide();
</script>
{% endblock %}
