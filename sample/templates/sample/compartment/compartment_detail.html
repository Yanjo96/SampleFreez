{% extends "base_generic.html" %}

{% block content %}
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href={% url "freezer-detail" compartment.freezer.id %}>{{ compartment.freezer.name }}</a></li>
    <li class="breadcrumb-item">{{ compartment.name }}</li>
  </ol>

  <p><strong>Temperature:</strong> {{ compartment.freezer.temperature }}Â°C</p>
  {% with num=compartment.get_number_of_space %}
  <p>Space: {{ num }} / {{ compartment.space }}</p>
  {% endwith %}

    <table class="table table-hover">
      <thead>
        <tr class="table-secondary">
          <th scope="col">Racks</th>
        </tr>
      </thead>
    <tbody>
      {% for racks in compartment.rack_set.all %}
      <tr class="table-secondary">
        <th scope="row"><a href="{{ racks.get_absolute_url }}">{{ racks.name }}</a></th>
      </tr>
      {% endfor %}
      {% if perms.sample.add_rack %}
        <tr class="table-secondary">
        <th scope="row"><a href={% url "rack-create" compartment.freezer.id compartment.id %}>create rack</a></th>
        </tr>
      {% endif %}
      <tr class="table-secondary">
        <th scope="row">Boxes without racks</th>
      </tr>
      {% for box in compartment.box_set.all %}
        {% if not box.rack %}
          <tr class="table-secondary">
            <th scope="row"><a href="{{ box.get_absolute_url }}">{{ box.name }}</a></th>
          </tr>
        {% endif %}
      {% endfor %}
      {% if perms.sample.add_box %}
        <tr class="table-secondary">
          <th><a href={% url "box-c-create" compartment.freezer.id compartment.id %}>create box</a></th>
        </tr>
      {% endif %}
    </tbody>
    </table>

  {% if perms.sample.change_compartment %}
    <a href={% url "compartment-update" compartment.freezer.id compartment.id %} class="btn btn-primary">update</a>
  {% endif %}
  {% if perms.sample.delete_compartment %}
    <a href={% url "compartment-delete" compartment.freezer.id compartment.id %} class="btn btn-primary">delete</a>
  {% endif %}
{% endblock %}
